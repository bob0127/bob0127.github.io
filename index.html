<!DOCTYPE html>
<html>
    <head>
        <title>塔羅牌</title>
        <style>
            body {
              background-image: url('https://farm2.staticflickr.com/1859/30277527828_67cf649d56_k.jpg');
              color: white; 
              display: flex;
              justify-content: center;
              align-items: center;
            }
            .container {
                display: flex;
                flex-direction: column; 
                justify-content: center;
                align-items: center;
            }
            .container_row {
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;

            }
            .side-image {
                
                margin: 20 20px; 
            }
            .dc {
                color: rgb(255, 174, 0);
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <style>
            p {
              font-size: 120%;
            }
            input{
                font-size: 120%;
            }
        </style>
        <div class="container">
            <h1>大家好</h1>
            <p >平常的我喜歡玩遊戲, 例如Minecraft, League of Legend, GTAV, Valorant</p><br>
            <p class="dc">我的Discord:bob0127</p>
            <a href="https://www.instagram.com/bobbob930127/" target="_blank" style="color:aqua">我的Instagram</a>
            <div class="container_row">
                <div class="side-image">
                    <img src="https://upload.wikimedia.org/wikipedia/zh/thumb/d/d0/JaketheDog.png/220px-JaketheDog.png" alt="Side Image">
                </div>
                <form onsubmit="event.preventDefault();">
                    
                    <input type="text" id="year" placeholder="輸入出生年" required>
                    <br>
                    <input type="text" id = "month" placeholder="輸入出生月" required>
                    <br>
                    <input type="text" id = "day" placeholder="輸入出生日" required>
                    <br>
                    <button onclick="calculate()">計算</button>
                    <p id="result">結果： </p>
                    <p id="loyear"></p>
                    <p > 我才剛學一點塔羅牌 <br> 所以只能產生名稱 不太會解釋 </p>
                </form>
                
                <div class="side-image">
                    <img src="https://upload.wikimedia.org/wikipedia/zh/e/e5/FinnAdventureTime.png" alt="Side Image">
                </div>
            </div>
        </div>
        
    </body>
</html>

<script>
    function calculate() {
        // 獲取用戶輸入的值
        var num1 = parseInt(document.getElementById('year').value);
        var num2 = parseInt(document.getElementById('month').value);
        var num3 = parseInt(document.getElementById('day').value);
        var currentDate = new Date();
        var currentYear = currentDate.getFullYear();
        if (num1 < 0 || num1 > currentYear || num2 > 12 || num2 < 1 || num3 > 31 || num3 < 1) {
            document.getElementById('result').innerHTML = '結果: 輸入錯誤生日';
            return;
        }else if(isNaN(num1)||isNaN(num2)||isNaN(num3)){
            document.getElementById('result').innerHTML = '結果: 未輸入完整';
            return;
        }
        if(num1<1000)
            num1+=1911;
        var first = 0;
        if(num3>22){
            var first=num3;
            while(first>=10){
                first=Math.floor(first/10+first%10);
            }
        }else {
            first = Math.floor(num3%22);
        }
        var yeardiv = 0;
        var temp = num1;
        var temp2;
        while(temp>0){
            yeardiv+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }      
        var third = Math.floor((yeardiv+num2+num3)%22);
        var second = yeardiv;
        if(num2>9) second += Math.floor(num2/10+num2%10);
        else second += num2;
        if(num3>9)second +=Math.floor(num3/10+num3%10);
        else second += num3;
        second=Math.floor(second%22);
        
        var myArray = ["愚者","魔術師","女祭司","皇后","國王","教皇","戀人","戰車","力量","隱者","命運之輪","正義","吊人",
"死神","節制","惡魔","塔","星星","月亮","太陽","審判","世界"];
        // 將結果顯示在頁面上
        var list = [0,31,59,90,120,151,181,212,243,273,304,334];
        var forth = Math.floor((list[num2-1]+num3)%22);
        var fifth = Math.floor((forth+21)%22);
        var sixth = Math.floor((forth+1)%22);
        var seventh = 0;
        temp = currentYear-1+num2+num3;
        while(temp>0){
            seventh+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }
        var seventh_1 = 0;
        temp = currentYear+num2+num3;
        while(temp>0){
            seventh_1+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }
        if(num2==1&&num3==1){
            temp = 12;
            temp2 = 31;
        }else {
            temp = num2;
            temp2 = num3-1;
        }
        document.getElementById('result').innerHTML = "<span style='color: AQUA;'>結果:</span><br>天賦1: " +
            "<span style='color: yellow;'>"+myArray[first] + first + "</span>"+"<br>天賦2: " +
            "<span style='color: yellow;'>"+myArray[second] + second + "</span>"+"<br>天賦3: " +
            "<span style='color: yellow;'>"+myArray[third] + third + "</span>"+"<br>天賦4: " +
            "<span style='color: yellow;'>"+myArray[forth] + forth + "</span>"+"<br>天賦5: " +
            "<span style='color: yellow;'>"+myArray[fifth] + fifth + "</span>"+"<br>天賦6: " +
            "<span style='color: yellow;'>"+myArray[sixth] + sixth + "</span>"+"<br>流年數: <br>" +
            (currentYear-1)+"/"+num2+"/"+num3+"~"+currentYear+"/"+temp+"/"+temp2+"  "+"<span style='color: yellow;'>"+myArray[seventh] + seventh + "</span>" + "<br>" + 
            currentYear+"/"+num2+"/"+num3+"~"+(currentYear+1)+"/"+temp+"/"+temp2+"  "+"<span style='color: yellow;'>"+myArray[seventh_1] + seventh_1 + "</span><br>";
        
        var flowyear = 0;
        temp = num1;
        while(temp>0){
            flowyear+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }temp = num2;
        while(temp>0){
            flowyear+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }temp = num3;
        while(temp>0){
            flowyear+=Math.floor(temp%10);
            temp=Math.floor(temp/10);
        }
        var  twoDimArray = [
            [1, 10, 19],
            [2, 11, 20],
            [3, 12, 21],
            [4, 13, 0],
            [5, 14],
            [6, 15],
            [7, 16],
            [8, 17],
            [9, 18],
        ];
        var booleanArray = Array.from({ length: 23 }).map(() => false);
        while(flowyear>=10){
            if(flowyear<=22)
                booleanArray[Math.floor(flowyear%22)] = true;
            flowyear = Math.floor(flowyear/10+flowyear%10);
        }
        booleanArray[Math.floor(flowyear%22)] = true;
        var newText = document.createTextNode("導師: ");
        document.getElementById('result').appendChild(newText);
        for(let i=0;i<twoDimArray[flowyear-1].length;i++){
            if(booleanArray[twoDimArray[flowyear-1][i]]==true){
                let newText = document.createElement("span");
                newText.style.color = "yellow";
                newText.innerHTML = twoDimArray[flowyear-1][i] + " ";
                document.getElementById('result').appendChild(newText);
            } 
        }
        var newText = document.createTextNode("陰影: ");
        document.getElementById('result').appendChild(newText);
        for(let i=0;i<twoDimArray[flowyear-1].length;i++){
            if(booleanArray[twoDimArray[flowyear-1][i]]==false){
                let newText = document.createElement("span");
                newText.style.color = "yellow";
                newText.innerHTML = twoDimArray[flowyear-1][i] + " ";
                document.getElementById('result').appendChild(newText);
            } 
        }
        newText = document.createTextNode(twoDimArray[flowyear][i]+" ");
            document.getElementById('result').appendChild(newText);
    }   

</script>